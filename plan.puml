@startuml
start
: Determine if the node is a parent or a child;

if (Is Parent Node?) then (yes)
    :Initiate Device Recognition;
    :Start Packet Capture;
    'Explicitly indicating threading
    partition "Thread 1: Network Operations" {
        :Continuous Network Monitoring;
        :Handle Network Errors;
    }
    :Find and connect to children nodes;
    :Generate and maintain list of candidate user devices;
    :Perform triangulation;
    :Calculate distances;
    :Assess Network Noise;
    if (Noise Below Threshold) then (yes)
        :Use UDP for Communication;
    else (no)
        :Use TCP for Communication;
    endif
    :Make Secure API Calls;
    :Return to Network Monitoring;
else (no)
    :Initiate Device Recognition;
    :Start Packet Capture;
    'Explicitly indicating threading
    partition "Thread 1: Network Operations" {
        :Continuous Network Monitoring;
        :Handle Network Errors;
    }
    :Pair with parent node;
    :Decide communication protocol based on noise;
    :Communicate distance data;
    :Configure based on parent commands;
    :Return to Network Monitoring;
endif

stop
@enduml
