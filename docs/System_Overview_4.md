Now, let's take a small break to better understand the scenario the root is presented with when a leaf passes it information about a device that is not currently in the candidate list. This means that the device already passed the criteria we've established for it being a possible user device (an OUI is present), however, it means that it hasn't been in the system before (otherwise, it would occupy a position in our candidate list already). When designing Integrate, the question of how to address this became a significant challenge **because of the alternative possibilities that it allows should the system simply treat the device as though it is a user device immediately.** For example, what if a neighbor is simply walking by your home and the signal from their phone is strong enough that it should reach the system? While the system won't react to this device in any noticeable way, as the calculated location of that device should be far from any of the smart devices in the home, we also don't want to block the device because that person may very well be someone who will visit your home in the future!

Therefore, in order to counter this possibility while still allowing the system to respond to the presence of new devices, Integrate uses yet another type of candidate period, this time entitled the **trial period**. The trial period is quite similar to the candidate period, however, it's purpose and functionality is slightly different. When the root receives distance data on a device that is not in the candidate list, the root immediately "saves" this device in a **trial list**. The trial list simply consists structs that contain: a timestamp (which represents the moment the device was encountered **by the leaf node**), the device's MAC and IPv6 addresses, a counter that represents the amount of leaves the parent has heard about this device from and a pointer to the next struct in the list. 

If the value of the counter = *n*, where *n* = the number of leaves present on the system, the system will consider that device as having entered it's **second** trial phase. In this phase, the system will first move the device from the trial list to the candidate list and mark it as a **candidate**. It will then replace the timestamp stored for that device with a timestamp which represents the moment the system heard about the device from **every node** (in other words, the moment we set counter = *n*). 

After this, the system will keep track of whether or not the device's distances is reported by the leaf nodes every time that the system receives data. If so, the location of that device is calculated and the system will respond to it as normal. However, should the distance data fail to be present in a packet, an immediate "countdown" starts for that device. The countdown will decrement (from 100 by default, though this value is changeable) every time distance data is missing from any of the distance "reports" given by the leaves. 

If distance data is reported by every leaf, the countdown is incremented instead (and the location of that device is calculated). If distance data is continually reported by the leaves to the point where the countdown is equal to it's initial value, the system removes the countdown "flag" and begins treating the device as a regular user device again. However, if this countdown reaches 0, the device is assumed to have dropped out of the network for long enough that it should no longer be tracked. The system will then remove this device from the candidate list and communicate that to the leaves so that they are aware that the device should henceforth be treated as a new device in any future interactions. Thus, we free up valuable space in our candidate list, while still allowing for new devices to enter the network temporarily. This gives users the ability to benefit from the system's automation, while keeping the device from being labeled as a *permanent* device when it should be simply treated as a guest. 

Furthermore, this gives the system criteria for adding devices to the block list by **refusing to treat devices not on the network as stationary**. In more practical terms, if someone visits your home and then leaves after a few hours, their device shouldn't be blocked after the candidate period of 24 hours expires because the system should still respond to the device if the person visits in the future. However, devices should still be blocked after a period of 24 hours if they are stationary on the network because it will prevent the system from tracking devices that will never move, and thus are not indicative of user activity. 

trial list:
-devices on network but not yet synced 

canidate list: 
-activity in the network

Should the counter not reach the value of *n* within a period of 1 minute, the device will be immediately dropped from the trial list. This indicates that the device did not stay within the system's "perimeter" long enough to be considered a user device, OR that the device is not transmitting data either consistently enough or powerfully enough to be a reliable "user device". 

[Continue](./System_Overview_5.md)